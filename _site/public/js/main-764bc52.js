(()=>{var x=()=>{let e,t=new URLSearchParams(document.location.search);return t.get("things")&&(e=decodeURIComponent(t.get("things")).split("^")),e},D=e=>{let t=[];for(let n=e.length-1;n>=0;n--){let r=Math.floor(Math.random()*(n+1));for(let o=0,s=0;o<=e.length-1;o++)if(t[o]===void 0){if(s===r){t[o]=e[n].trim();break}s++}}return t},q=e=>{let t=0;for(let n=0;n<e.length;n++)t+=e.charCodeAt(n);return t};var f=e=>Number.parseInt(e,10)*Math.PI/180,T=e=>Math.cos(f(Number.parseInt(e,10))),M=e=>Math.sin(f(Number.parseInt(e,10)));var w={MIN_THINGS:2,MAX_THINGS:30,COLOUR_SELECTION_METHOD:2};var k=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],R=e=>{let t=e.length,n=[];if(w.COLOUR_SELECTION_METHOD===1)n=k.sort(()=>.5-Math.random()).slice(0,t);else if(w.COLOUR_SELECTION_METHOD===2)for(let r of e){let s=q(r)%k.length;n.push(k[s])}return n};var H=(e,t,n,r,o,s,d)=>{let i=document.createElement("div");i.classList.add("optionText"),i.innerHTML='<p class="option" id="option'.concat(e,'" data-colour="').concat(d,'">').concat(t,"</p>"),n.append(i),i.style.left="".concat(s,"px"),i.style.top="calc(50% - ".concat(i.offsetHeight/2,"px"),i.style.width="".concat(r*2,"px"),i.style.transform="perspective(none) rotate(".concat(o,"deg)")},W=()=>{let e=document.querySelector("main");e.innerHTML="";let t=document.createElement("article"),n=document.createElement("canvas"),r=document.createElement("canvas");n.classList.add("wheel"),r.classList.add("pointer"),t.append(n),e.append(t),e.append(r);let o=document.querySelectorAll(".buttons button");for(let s of o)s.classList.add("yay")},C=e=>{let t=!1;if(document.querySelector("#wheel-holder")){document.body.classList.add("js"),document.body.classList.add("wheelpage"),document.body.offsetHeight>document.body.offsetWidth&&(document.body.classList.add("portrait"),t=!0),W();let n=document.querySelector("article"),r=document.querySelector(".wheel");if(r.getContext){let o=r.getContext("2d"),s=document.querySelector("main"),d=document.querySelector("header"),i=document.querySelector(".buttons"),m=Math.min(s.offsetWidth,s.offsetHeight),a=m/2,b=s.offsetHeight/2,v=10,u=a-v,y=360/e.length,G=R(e);s.style.width="".concat(m,"px"),s.style.height="".concat(m,"px"),r.width=m,r.height=m,t&&(s.style.flexGrow=0,d.style.flexGrow=1,i.style.flexGrow=1,b=s.offsetHeight/2);for(let l in e)if(Object.hasOwn(e,l)){let h=Number.parseInt(l,10),g=h*y,S=f(g),L=u*T(g),A=u*M(g),$=(h+1)*y,N=f($);o.beginPath(),o.moveTo(a,a),o.lineTo(a+L,a+A),o.arc(a,a,u,S,N,!1),o.fillStyle=G[h],o.fill(),o.closePath();let F=Number.parseInt(g+y/2,10);H(h,e[h],n,u,F,v,G[h])}o.lineWidth=1,o.strokeStyle="rgb(0, 0, 0)";for(let l in e)if(Object.hasOwn(e,l)){let g=Number.parseInt(l,10)*y,S=u*T(g),L=u*M(g);o.beginPath(),o.moveTo(a,a),o.lineTo(a+S,a+L),o.stroke(),o.closePath()}o.beginPath(),o.moveTo(a,a),o.arc(a,a,u,0,Math.PI*2,!0),o.stroke(),o.closePath();let p=document.querySelector(".pointer");if(p.getContext){p.style.top="".concat(b-20,"px");let l=p.getContext("2d");p.width=100,p.height=40,l.beginPath(),l.moveTo(100,40),l.lineTo(100,0),l.lineTo(60,20),l.fillStyle="rgba(255, 255, 255, 0.5)",l.fill()}}}};var c,U=12,B=["7 Moons","Bag of Dungeon","Boss Monster","Cluedo","Doomlings","Dragonrealm","Dragonwood","Dungeon Mayhem","Escape the Dark Castle","Escape the Dark Sector","Exploding Kittens","Forbidden Desert","Forbidden Island","Forbidden Jungle","Forbidden Sky","Grimwood","Gubs","Here to Slay","The Isle of Cats","Labyrinth","Martian Fluxx","Munchkin","Munchkin: Critical Role","Munchkin: Marvel","Squirmish","Star Fluxx","Sushi Go","Unearth","Uno Flip","Unstable Unicorns"],P=[["Pizza","Burger","Thai","Fryup","Indian","Chinese","Sushi","Pasta","Tex-Mex"]],V=()=>P[Math.floor(Math.random()*P.length)],_=()=>{let e=document.querySelectorAll(".option");for(let t of e)t.classList.remove("loser"),t.classList.remove("throbber"),t.classList.remove("winner")},O=()=>{let e=document.querySelector("article");e.style.transform="perspective(none) rotate(0deg)",e.classList.add("spinning"),_(),document.querySelector("#start").classList.add("hide"),document.querySelector("#stop").classList.remove("hide")},j=()=>{let e="/things?things=".concat(encodeURIComponent(c.join("^")));document.location=e},Y=()=>{let e=document.querySelectorAll(".option"),t=document.querySelector(".winner");for(let n of e)n.classList.add("loser");t.classList.remove("loser"),t.classList.add("throbber")},z=e=>{let t=e||Math.floor(Math.random()*c.length);document.querySelector("#option".concat(t)).classList.add("winner"),console.log("winner: ".concat(c[t]));let n=360/c.length;return Math.round((t+1)*-n+n/2)},I=()=>{let e=document.querySelector("article"),r=window.getComputedStyle(e).getPropertyValue("transform").split("(")[1].split(")")[0].split(",");return Math.round(Math.atan2(r[1],r[0])*(180/Math.PI))},E=e=>{let t=document.querySelector("article");if(!t.classList.contains("stopping")){document.querySelector("#stop").classList.remove("yay");let n=I();t.classList.remove("spinning"),t.classList.add("stopping"),t.style.transform="perspective(none) rotate(".concat(n,"deg)");let r=z(e),o=2+Math.round(Math.random()*3),s=2+o/2,d=[{transform:"perspective(none) rotate(".concat(n,"deg)")},{transform:"perspective(none) rotate(".concat(r+360*o,"deg)")}],i={duration:s*1e3,iterations:1,easing:"ease-out"};t.animate(d,i),window.setTimeout(()=>{t.style.transform="perspective(none) rotate(".concat(r,"deg)"),t.classList.remove("stopping"),Y(),document.querySelector("#start").classList.remove("hide"),document.querySelector("#stop").classList.add("hide"),document.querySelector("#stop").classList.add("yay")},s*1e3)}},K=()=>{let e=document.querySelector("article");e.classList.contains("stopping")||(e.classList.contains("spinning")?E():O())};if(document.querySelector("#wheel-holder")){let e=x(),t=e||V();c=D(t),window.addEventListener("load",()=>{C(c),console.log("".concat(c.length," things on the wheel"))}),window.addEventListener("resize",()=>{C(c)}),window.addEventListener("keydown",n=>{if(n.key===" "&&K(),n.key==="0"){let r=n.ctrlKey?B.length:U,s=B.sort(()=>.5-Math.random()).slice(0,r),d="/?things=".concat(encodeURIComponent(s.join("^")));document.location=d}n.key==="Enter"&&console.log(I())}),document.querySelector("#start").addEventListener("click",()=>{O()}),document.querySelector("#stop").addEventListener("click",()=>{E()}),document.querySelector("#change").addEventListener("click",()=>{j()})}})();
//# sourceMappingURL=main-764bc52.js.map */
